---
layout: default
---

<article class="post container" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">{{ page.title }}</h1>
    <p class="post-meta"><time datetime="{{ page.date | date_to_xmlschema }}" itemprop="datePublished">Published {{ page.date | date: "%b %-d, %Y" }}</time>
    {% assign words = content | number_of_words %}
    {% if words < 360 %}
      — 1 min read
    {% else %}
      — {{ words | divided_by:180 }} mins read
    {% endif %}
    {% if page.author %} • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">{{ page.author }}</span></span>{% endif %}</p>
  </header>
  <div class="post-content" itemprop="articleBody">
    {{ content }}
    {% include post-share.html %}
  </div>
</article>

<section class="post-list">
  <div class="container">
    {% assign rsort_posts = site.posts | sort: 'date' | reverse %}

    {% comment %}
    Track how much related content is available
    {% endcomment %}

    {% assign numRelatedPosts = 0 %}

    {% for post in rsort_posts %}
      {% for tag in post.tags %}
        {% if post.url != page.url %}
          {% if page.tags contains tag %}
            {% assign numRelatedPosts = numRelatedPosts | plus: 1 %}
          {% endif %}
        {% endif %}
      {% endfor %}
    {% endfor %}

    {% if numRelatedPosts == 1 %}
      <h3>Related Post</h3>
    {% endif %}
    {% if numRelatedPosts > 1 %}
      <h3>Related Posts</h3>
    {% endif %}

    {% comment %}
    Display related content, up to 3 posts
    {% endcomment %}

    {% assign maxRelatedCounter = 0 %}

    {% for post in rsort_posts %}
      {% assign sameTagCount = 0 %}
      {% assign commonTags = '' %}

      {% for tag in post.tags %}
        {% if post.url != page.url %}
          {% if page.tags contains tag %}
            {% assign sameTagCount = sameTagCount | plus: 1 %}
            {% capture tagmarkup %} <span class="label label-default">{{ tag }}</span> {% endcapture %}
            {% assign commonTags = commonTags | append: tagmarkup %}
          {% endif %}
        {% endif %}
      {% endfor %}

      {% if sameTagCount >= 1 %}
        <article class="post-item">
          <p>
            <span class="post-meta">{{ post.date | date: "%b %-d, %Y" }}</span>  — 
            <strong><a class="post-link" href="{{ post.url}}">{{ post.title }}</a></strong>
            <br>
            <span>{{ post.description }}</span> <a class="post-link readmore" href="{{ post.url}}">Read more</a></p>
        </article>
        {% assign maxRelatedCounter = maxRelatedCounter | plus: 1 %}
        {% if maxRelatedCounter >= 3 %}
          {% break %}
        {% endif %}
      {% endif %}

    {% endfor %}

    {% if numRelatedPosts == 0 %}
      <h3>Recent Posts</h3>

      {% for post in rsort_posts limit:3 %}
        {% if post.url != page.url %}
        <article class="post-item">
          <p>
            <span class="post-meta">{{ post.date | date: "%b %-d, %Y" }}</span>  — 
            <strong><a class="post-link" href="{{ post.url}}">{{ post.title }}</a></strong>
            <br>
            <span>{{ post.description }}</span> <a class="post-link readmore" href="{{ post.url}}">Read more</a></p>
        </article>
        {% endif %}
      {% endfor %}
    {% endif %}

    <h5>Want more? Go back to the <a href="{{ '/' }}">index</a>!</h5>
  </div>
</section>